<!DOCTYPE html>
<html lang="it">
  <head>
    <% include partials/head.ejs %>
  </head>
  <body style="padding-top: 72px;">
    <% include partials/header.ejs %>
    <div class="container-fluid">               
      <div class="row">
        <div class="col-lg-7 col-xl-5 px-4 pb-4 pl-xl-5 pr-xl-5">
          <section class="mx-n4 mx-xl-n5 mb-4 mb-xl-5">
            <!-- Slider main container-->
            <div class="swiper-container booking-detail-slider">
              <!-- Additional required wrapper-->
              <div class="swiper-wrapper">
                <!-- Slides-->
                <% if (data.data_pren.foto_0 != null && data.data_pren.foto_0 != undefined) { %>
                  <div class="swiper-slide"><img class="img-fluid" src="../images/<%= data.data_pren.foto_0" alt="Our street"></div>
                <% } %>
                <% if (data.data_pren.foto_1 != null && data.data_pren.foto_1 != undefined) { %>
                  <div class="swiper-slide"><img class="img-fluid" src="../images/<%= data.data_pren.foto_1" alt="Our street"></div>
                <% } %>
                <% if (data.data_pren.foto_2 != null && data.data_pren.foto_2 != undefined) { %>
                  <div class="swiper-slide"><img class="img-fluid" src="../images/<%= data.data_pren.foto_2" alt="Our street"></div>
                <% } %>
                <% if (data.data_pren.foto_3 != null && data.data_pren.foto_3 != undefined) { %>
                  <div class="swiper-slide"><img class="img-fluid" src="../images/<%= data.data_pren.foto_3" alt="Our street"></div>
                <% } %>
                <% if (data.data_pren.foto_4 != null && data.data_pren.foto_4 != undefined) { %>
                  <div class="swiper-slide"><img class="img-fluid" src="../images/<%= data.data_pren.foto_4" alt="Our street"></div>
                <% } %>
                <% if (data.data_pren.foto_5 != null && data.data_pren.foto_5 != undefined) { %>
                  <div class="swiper-slide"><img class="img-fluid" src="../images/<%= data.data_pren.foto_5" alt="Our street"></div>
                <% } %>
              </div>
              <div class="swiper-pagination swiper-pagination-white"></div>
              <div class="swiper-button-prev swiper-button-white"></div>
              <div class="swiper-button-next swiper-button-white">   </div>
            </div>
          </section>
          <!-- Breadcrumbs -->
          <ol class="breadcrumb pl-0  justify-content-start">
            <li class="breadcrumb-item"><a href="/">Home</a></li>
            <li class="breadcrumb-item"><a href="/profiloUtenteControl/finestraListaPrenotazioniEffettuate">I tuoi viaggi</a></li>
            <li class="breadcrumb-item active">Prenotazione effettuata   </li>
          </ol>
          <div class="text-block">
            <p class="subtitle"><%= data.data_pren.data_inizio.toString().slice(0,15) %> - <%= data.data_pren.data_fine.toString().slice(0,15) %></p>
            <h1 class="hero-heading mb-3"><%= data.data_pren.titolo %></h1>
          </div>
          <div class="text-block">
            <!-- h6 class="mb-4">Numero Notti</h6   DA ELIMINARE?    -->
            <div class="row mb-3">
              <div class="col-md-6 d-flex align-items-center mb-3 mb-md-0">
                <div class="date-tile mr-3">
                  <div class="text-uppercase"> <span class="text-sm"><%= data.data_pren.data_inizio.toString().slice(4,7) %></span><br><strong class="text-lg"><%= data.data_pren.data_inizio.toString().slice(8,10) %></strong></div>
                </div>
                <p class="text-sm mb-0"><%= data.data_pren.data_inizio.toString().slice(0,3) %><br/>check-in</p>
              </div>
              <div class="col-md-6 d-flex align-items-center">
                <div class="date-tile mr-3">
                  <div class="text-uppercase"> <span class="text-sm"><%= data.data_pren.data_fine.toString().slice(4,7) %></span><br><strong class="text-lg"><%= data.data_pren.data_fine.toString().slice(8,10) %></strong></div>
                </div>
                <p class="text-sm mb-0"><%= data.data_pren.data_fine.toString().slice(0,3) %><br/>check-out</p>
              </div>
            </div>
          </div>
          <div class="text-block">
            <div class="row">
              <div class="col-sm">
                <h6>Indirizzo</h6>
                <p class="text-muted"><%= data.data_pren.indirizzo %> <%= data.data_pren.n_civico %>, <%= data.data_pren.citta %></p>
              </div>
              <div class="col-sm">
                <h6>Telefono</h6>
                <p class="text-muted"><%= data.data_pren.telefono_uh %></p>
              </div>
            </div>
          </div>
          <div class="text-block">
            <div class="media align-items-center mb-3">
              <div class="media-body">
                <h6><%= data.data_pren.tipo_all %></h6>
                <p class="text-muted mb-0">Ospitato da <a href="user-profile.html" class="text-reset"><%= data.data_pren.nome_proprietario %></a></p>
              </div><a href="user-profile.html"><img class="avatar avatar-lg avatar-border-white ml-4" src="https://d19m59y37dris4.cloudfront.net/directory/1-5/img/avatar/avatar-10.jpg" alt="Jack London"></a>
            </div>
          </div>
          <div class="text-block">
            <h6 class="mb-3">Chi viene con te</h6>
            <div class="row mb-3">
              <% let ospiti = data.data_pren.nomi_ospiti; if (ospiti == "") { %>
              <p class="text-muted mb-0 pl-3">Nessun altro ospite verrà con te</p>
              <% } else { ospiti = data.data_pren.nomi_ospiti.slice(0, (ospiti.length-1)); ospiti = ospiti.split('-'); for (osp of ospiti) { %>
              <div class="col-auto text-center text-sm"><img class="avatar avatar-border-white mb-1" src="../images/ominoUtente.png"><br><%= osp %></div>
              <% }}; %>
              </div>
          </div>
          <div class="text-block">
            <div class="row">
              <div class="col">
                <h6>Costo totale</h6>
                <p class="text-muted">€<%= data.data_pren.prezzo_totale %></p>
              </div>
            </div>
          </div>
          <div class="text-block">
            <h6 class="mb-4">Azioni </h6>
            <ul class="list-unstyled">
              <li class="mb-2"> 
                <div class="media align-items-center mb-3">
                  <div class="py-0">
                    <button class="btn btn-outline-primary" id="recButton" type="button" data-toggle="collapse" data-target="#recensisciAlloggio" aria-expanded="false" aria-controls="recensisciAlloggio" <%= data.data_rec %>>Recensisci Alloggio</button>                   
                    <div class="collapse mt-4" id="recensisciAlloggio">
                      <form class="form" id="form_recensione" method="POST" action="/profiloUtenteControl/recensisciAlloggio">
                        <div class="row">
                          <div class="col-sm-6">
                            <div class="form-group">
                              <label class="form-label" for="nome"></label>
                              <input class="form-control-plaintext" type="text" placeholder="Fai la tua recensione" readonly>
                            </div>
                          </div>
                          <div class="col-sm-6">
                            <div class="form-group">
                              <label class="form-label" for="valutazione">La tua valutazione</label>
                              <select class="custom-select focus-shadow-0 form-control-lg" name="valutazione" id="valutazione">
                                <option value="5">&#9733;&#9733;&#9733;&#9733;&#9733; 5</option>
                                <option value="4">&#9733;&#9733;&#9733;&#9733;&#9734; 4</option>
                                <option value="3">&#9733;&#9733;&#9733;&#9734;&#9734; 3</option>
                                <option value="2">&#9733;&#9733;&#9734;&#9734;&#9734; 2</option>
                                <option value="1">&#9733;&#9734;&#9734;&#9734;&#9734; 1</option>
                              </select>
                            </div>
                          </div>
                        </div>
                        <div class="form-group">
                          <label class="form-label" for="testoRec">Testo </label>
                          <textarea class="form-control" rows="4" name="testoRec" id="testoRec" placeholder="Scrivi qualcosa su alloggio e cliente" required="required"></textarea>
                        </div>
                        <button class="btn btn-primary" id="inviaRecensione" type="submit">Invia</button>
                      </form>
                    </div>
                  </div>
                </div>
              </li>
              <li class="mb-2"> 
                <div class="media align-items-center mb-3">
                  <div class="py-0">
                    <button class="btn btn-outline-danger" type="button" data-toggle="collapse" data-target="#annullaPrenotazione" aria-expanded="false" aria-controls="annullaPrenotazione" <%= data.data_ann %>>Annulla prenotazione</button>
                    <div class="collapse mt-4" id="annullaPrenotazione">
                      <h5 class="mb-4">Sei sicuro di voler annullare la prenotazione? </h5>
                      <div class="row">
                        <div class="col-sm-6 mb-2">
                          <a href="/profiloUtenteControl/annullaPrenotazione" id="confermaAnnullamento"><button class="col btn btn-success">SI</button></a>
                        </div>
                        <div class="col-sm-6 mb-2">
                          <button class="col btn btn-danger" type="button" data-toggle="collapse" data-target="#annullaPrenotazione" aria-expanded="false" aria-controls="annullaPrenotazione">NO</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </li>
              <li class="mb-2"> 
                <div class="media align-items-center mb-3">
                  <div class="media-body"><a role="button" class="btn btn-outline-info" href="mailto:<%= data.data_pren.email_uh %>">Contatta host</a></div>
                </div>
              </li>
              <li class="mb-2"> 
                <div class="media align-items-center mb-3">
                  <div class="py-0">
                    <button class="btn btn-outline-success" type="button" data-toggle="collapse" data-target="#pagamento" aria-expanded="false" aria-controls="pagamento" <%= data.data_pag %>>Pagamento</button>
                    <div class="collapse mt-4" id="pagamento">
                      <h4 class="mb-2">totale importo da pagare: €<%= data.data_pren.prezzo_totale %></h4>
                      <form class="form" id="form_pagamento" method="POST" action="/profiloUtenteControl/pagamento">
                        <div class="row">
                          <div class="col-sm-6">
                            <div class="form-group">
                              <label class="form-label" for="name">Nome titolare</label>
                              <input class="form-control" type="text" name="titolareCarta" id="titolareCarta" required="required">
                            </div>
                          </div>
                          <div class="col-sm-6">
                            <div class="form-group">
                              <label class="form-label" for="rating">Numero Carta</label>
                              <input class="form-control" type="text" name="numeroCarta" id="numeroCarta" required="required">
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-sm-6">
                            <div class="form-group">
                              <label class="form-label" for="name">Scadenza</label>
                              <input class="form-control" type="text" name="dataScadenza" id="dataScadenza" placeholder="MM/AAAA" required="required">
                            </div>
                          </div>
                          <div class="col-sm-6">
                            <div class="form-group">
                              <label class="form-label" for="rating">CVV</label>
                              <input class="form-control" type="text" name="cvv" id="cvv" required="required">
                            </div>
                          </div>
                        </div>
                        <button class="btn btn-success" id="inviaPagamento" type="submit">Paga</button>
                      </form>
                    </div>
                  </div>
                </div>
              </li>
            </ul>
          </div>
          <div class="text-block">
            <h6 class="mb-4">Cose da tenere a mente </h6> <!-- CARICARE LE REGOLE -->
            <ul class="list-unstyled">
              <li class="mb-2"> 
                <div class="media align-items-center mb-3">
                  <div class="icon-rounded icon-rounded-sm bg-secondary-light mr-4"><i class="fa fas fa-child text-secondary fa-fw text-center"></i></div>
                  <div class="media-body"><span class="text-sm">Not suitable for children and infants - The entrance staircase doesn't have handrails</span></div>
                </div>
              </li>
              <li class="mb-2"> 
                <div class="media align-items-center mb-3">
                  <div class="icon-rounded icon-rounded-sm bg-secondary-light mr-4"><i class="fa fas fa-glass-cheers text-secondary fa-fw text-center"></i></div>
                  <div class="media-body"><span class="text-sm">No parties or events</span></div>
                </div>
              </li>
              <li class="mb-2"> 
                <div class="media align-items-center mb-3">
                  <div class="icon-rounded icon-rounded-sm bg-secondary-light mr-4"><i class="fa fa-smoking-ban text-secondary fa-fw text-center"></i></div>
                  <div class="media-body"><span class="text-sm">No smoking</span></div>
                </div>
              </li>
              <li class="mb-2"> 
                <div class="media align-items-center mb-3">
                  <div class="icon-rounded icon-rounded-sm bg-secondary-light mr-4"><i class="fa fa-cat text-secondary fa-fw text-center"></i></div>
                  <div class="media-body"><span class="text-sm">No pets</span></div>
                </div>
              </li>
            </ul>
            <div class="collapse" id="moreRules">
              <ul class="list-unstyled">
                <li class="mb-2"> 
                  <div class="media align-items-center mb-3">
                    <div class="icon-rounded icon-rounded-sm bg-secondary-light mr-4"><i class="fa fas fa-child text-secondary fa-fw text-center"></i></div>
                    <div class="media-body"><span class="text-sm">Not suitable for children and infants - The entrance staircase doesn't have handrails</span></div>
                  </div>
                </li>
                <li class="mb-2"> 
                  <div class="media align-items-center mb-3">
                    <div class="icon-rounded icon-rounded-sm bg-secondary-light mr-4"><i class="fa fas fa-glass-cheers text-secondary fa-fw text-center"></i></div>
                    <div class="media-body"><span class="text-sm">No parties or events</span></div>
                  </div>
                </li>
                <li class="mb-2"> 
                  <div class="media align-items-center mb-3">
                    <div class="icon-rounded icon-rounded-sm bg-secondary-light mr-4"><i class="fa fa-smoking-ban text-secondary fa-fw text-center"></i></div>
                    <div class="media-body"><span class="text-sm">No smoking</span></div>
                  </div>
                </li>
                <li class="mb-2"> 
                  <div class="media align-items-center mb-3">
                    <div class="icon-rounded icon-rounded-sm bg-secondary-light mr-4"><i class="fa fa-cat text-secondary fa-fw text-center"></i></div>
                    <div class="media-body"><span class="text-sm">No pets</span></div>
                  </div>
                </li>
              </ul>
            </div>
            <button class="btn btn-link btn-collapse pl-0 text-muted" type="button" data-toggle="collapse" data-target="#moreRules" aria-expanded="false" aria-controls="moreRules" data-expanded-text="Show less" data-collapsed-text="Show more">Show more</button>
          </div>
          <div class="text-block d-print-none">
            <button class="btn btn-link pl-0" onclick="window.print()"><i class="fa fa-print mr-2"></i>Print </button>
          </div>
        </div>
        <div class="col-lg-5 col-xl-7 map-side-lg px-lg-0">
          <div class="map-full shadow-left" id="detailSideMap"></div>
        </div>
      </div>
    </div>
    <!-- Footer-->
    <% include partials/footer.ejs %>
    
    <!-- scriptFooter -->
    <% include partials/scriptFooter.ejs %>

    <script>
      
      $(document).ready(function() {

        // ONCLICK SICURI?
        
        $('#confermaAnnullamento').on('click', function() {
          window.alert('Operazione andata a buon fine');
        });

        $('#inviaRecensione').on('click', function() {
          window.alert('Operazione andata a buon fine');
        });

        $('#inviaPagamento').on('click', function() {
          window.alert('Operazione andata a buon fine');
        });
      });
      
    </script>
  </body>
</html>